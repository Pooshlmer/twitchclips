(this.webpackJsonptwitchclips=this.webpackJsonptwitchclips||[]).push([[0],{25:function(e,t,a){e.exports=a(65)},30:function(e,t,a){},61:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(23),l=a.n(i),s=(a(30),a(2)),c=a.n(s),u=a(4),o=a(3),h=a(7),p=a(8),d=a(9),f=a(13),v=a(12),m=a(67),g=a(6),b=a.n(g),k=a(24),w=a.n(k),O=function(){function e(t){Object(h.a)(this,e),this.NUMBER_OF_FOLLOWS=100,this.CLIPS_PER_FOLLOW=10,this.authtoken=t,b.a.defaults.headers.common.Authorization="Bearer "+t,b.a.defaults.headers.common["Client-ID"]="iscuhj0tftkxkrcmwcw4slvjj4k9m3"}return Object(p.a)(e,[{key:"getAllClips",value:function(){var e=Object(o.a)(c.a.mark((function e(t,a){var n,r,i,l,s,o,h,p,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="https://api.twitch.tv/helix/clips",console.log(a),null!==this.authtoken){e.next=4;break}return e.abrupt("return",null);case 4:r=new Date,(i=new Date).setDate(i.getDate()-a),l=[],s=Object(u.a)(t);try{for(s.s();!(o=s.n()).done;)h=o.value,p=void 0,p=0!==a?{broadcaster_id:h.to_id,started_at:i.toISOString(),ended_at:r.toISOString(),first:this.CLIPS_PER_FOLLOW}:{broadcaster_id:h.to_id,first:this.CLIPS_PER_FOLLOW},d={params:p},l.push(b.a.get(n,d))}catch(c){s.e(c)}finally{s.f()}return e.abrupt("return",Promise.allSettled(l));case 11:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.twitch.tv/helix/users",e.abrupt("return",b.a.get("https://api.twitch.tv/helix/users"));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getFollows",value:function(){var e=Object(o.a)(c.a.mark((function e(t){var a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.twitch.tv/helix/users/follows",a={from_id:t,first:this.NUMBER_OF_FOLLOWS},n={params:a},e.abrupt("return",b.a.get("https://api.twitch.tv/helix/users/follows",n));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getToken",value:function(){var e=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.authtoken);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"getLoginLink",value:function(){var e=this.TWITCH_LOGIN_LINK,t={client_id:"iscuhj0tftkxkrcmwcw4slvjj4k9m3",redirect_uri:this.LOCALREDIRECT,response_type:"token",scope:"user:read:email",state:"vLIBBQBcL5E2Tg72ki4SjKmSXWmIi6QV"};return e+"?"+w.a.stringify(t)}}]),e}();O.TWITCH_LOGIN_LINK="https://id.twitch.tv/oauth2/authorize",O.LOCALREDIRECT="http://pooshlmer.github.io/twitchclips/",O.TWITCH_GETUSER_LINK="https://api.twitch.tv/helix/users";a(61);function E(e){var t=e.clipdata;return r.a.createElement("div",{className:"clip"},r.a.createElement("a",{href:t.url},r.a.createElement("img",{alt:t.title,src:t.thumbnail_url}),r.a.createElement("div",{className:"cliptitle"},r.a.createElement("strong",null,t.title))),r.a.createElement("div",null,t.broadcaster_name),r.a.createElement("div",null,"Clipped by ",t.creator_name),r.a.createElement("div",null,t.view_count," views"))}var L=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={dateRange:e.dateRange},n.handleChange=n.handleChange.bind(Object(d.a)(n)),n.onChange=e.onChange,n}return Object(p.a)(a,[{key:"handleChange",value:function(e){this.setState({dateRange:e.target.value}),this.onChange(e.target.value)}},{key:"render",value:function(){return r.a.createElement("label",null,"Filter by:",r.a.createElement("select",{value:this.state.dateRange,onChange:this.handleChange},r.a.createElement("option",{value:"1"},"24H"),r.a.createElement("option",{value:"7"},"7D"),r.a.createElement("option",{value:"30"},"30D"),r.a.createElement("option",{value:"0"},"All")))}}]),a}(r.a.Component),y=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;Object(h.a)(this,a),(n=t.call(this,e)).renderClips=function(){var e=Object(o.a)(c.a.mark((function e(t){var a,i,l,s,o,h,p,d,f,v,m,g,b,k,w,L,y,C,_,x,j,I,S;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!1,i=null,l=null,s=null,o=n.props.cookies,null===n.state.api){e.next=35;break}if((h=new Date).setHours(h.getHours()-1),!(null!=(p=n.state["clipexpire"+t])&&p>h)){e.next=14;break}i=n.state["clipdatas"+t],a=!0,e.next=35;break;case 14:if(d=null,null==o.get("userId")){e.next=19;break}d=o.get("userId"),e.next=26;break;case 19:return e.next=21,n.state.api.getUser();case 21:if(200===(l=e.sent).status){e.next=25;break}return n.resetToLogin(),e.abrupt("return");case 25:o.set("userId",l.data.data[0].id);case 26:return e.next=28,n.state.api.getFollows(d);case 28:if(200===(s=e.sent).status){e.next=32;break}return n.resetToLogin(),e.abrupt("return");case 32:return e.next=34,n.state.api.getAllClips(s.data.data,parseInt(t));case 34:i=e.sent;case 35:if(f=[],v=[],null===i)v.push(r.a.createElement("a",{key:"loginlink",href:O.getLoginLink()},"Login to Twitch to see Clips")),n.setState({clips:v});else{if(a){m=Object(u.a)(i);try{for(m.s();!(g=m.n()).done;)b=g.value,f.push(b)}catch(c){m.e(c)}finally{m.f()}}else{k=Object(u.a)(i);try{for(k.s();!(w=k.n()).done;)if("fulfilled"===(L=w.value).status){y=Object(u.a)(L.value.data.data);try{for(y.s();!(C=y.n()).done;)_=C.value,f.push(_)}catch(c){y.e(c)}finally{y.f()}}else console.error(L.reason)}catch(c){k.e(c)}finally{k.f()}}f.sort((function(e,t){return t.view_count-e.view_count})),0===f.length&&v.push(r.a.createElement("div",null,"There are no clips from your follows that meet the specified criteria.")),x=Object(u.a)(f);try{for(x.s();!(j=x.n()).done;)I=j.value,v.push(r.a.createElement(E,{key:I.id,clipdata:I}))}catch(c){x.e(c)}finally{x.f()}S={clips:v},a||(S["clipdatas"+t]=f,S["clipexpire"+t]=Date.now()),n.setState(S)}case 38:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var i=null,l=null;if(""!==document.location.hash){i=/access_token=([^&]+)/.exec(document.location.hash)[1],l=new O(i)}return n.state={clips:[r.a.createElement("div",null,"Loading clips...please wait")],api:l,dateRange:1,clipdatas0:null,clipdatas1:null,clipdatas7:null,clipdatas30:null,clipexpire0:null,clipexpire1:null,clipexpire7:null,clipexpire30:null},n.handleDateChange=n.handleDateChange.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"resetToLogin",value:function(){var e=[r.a.createElement("a",{key:"loginlink",href:O.getLoginLink()},"Login to Twitch to see Clips")];this.setState({clips:e})}},{key:"handleDateChange",value:function(e){var t={dateRange:e,clips:[r.a.createElement("div",null,"Loading clips...please wait")]};this.setState(t),this.renderClips(e)}},{key:"componentDidMount",value:function(){this.renderClips(1)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(L,{dateRange:this.state.dateRange,onChange:this.handleDateChange})),r.a.createElement("div",{className:"clipOuterDiv"},this.state.clips))}}]),a}(r.a.Component),C=Object(m.a)(y);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[25,1,2]]]);
//# sourceMappingURL=main.49e64814.chunk.js.map